<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!------ Include the above in your HEAD tag ---------->

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
          integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/products.css">
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<section class="jumbotron text-center">
    <div class="container">
        <h1 class="jumbotron-heading">KASPI-KILLER</h1>
    </div>
</section>
<div class="container">
    <div class="row">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item"><a href="category.html">Category</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Product</li>
                </ol>
            </nav>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <!-- Image -->
        <div class="col-12 col-lg-6">
            <div class="card bg-light mb-3">
                <div class="card-body">
                    <a href="" data-toggle="modal" data-target="#productModal">
                        <img class="img-fluid"
                             th:src="@{/products/image/big/{id}(id=${product.id})}"/>
                        <p class="text-center">Zoom</p>
                    </a>
                </div>
            </div>
        </div>

        <!-- Add to cart -->
        <div class="col-12 col-lg-6 add_to_cart_block">
            <div class="card bg-light mb-3">
                <div class="card-body">
                    <p class="name" th:text="${product.name}"></p>
                    <div class="col-12">
                        <div class="card border-light mb-3">
                            <div class="card-header bg-primary text-white text-uppercase"><i
                                    class="fa fa-align-justify"></i> Description
                            </div>
                            <div class="card-body">
                                <p class="card-text"></p>
                            </div>
                        </div>
                    </div>
                    <div class="product_rassurance">
                        <ul class="list-inline">
                            <li class="list-inline-item"><i class="fa fa-truck fa-2x"></i><br/>Fast delivery</li>
                            <li class="list-inline-item"><i class="fa fa-credit-card fa-2x"></i><br/>Secure payment</li>
                            <li class="list-inline-item"><i class="fa fa-phone fa-2x"></i><br/>+33 1 22 54 65 60</li>
                        </ul>
                    </div>
                    <div class="reviews_product p-3 mb-2 ">
                        3 reviews
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        (4/5)
                        <a class="pull-right" href="#reviews">View all reviews</a>
                    </div>
                    <div class="datasheet p-3 mb-2 bg-info text-white">
                        <a href="" class="text-white"><i class="fa fa-file-text"></i> Download DataSheet</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Description -->


        <!-- Reviews -->
        <div class="col-12">
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Price</th>
                        <th scope="col">Store</th>
                        <th scope="col" class="text-center">Buy</th>
                        <th scope="col" sec:authorize="hasRole('ROLE_MODERATOR')">Edit</th>
                        <th scope="col" sec:authorize="hasRole('ROLE_ADMIN')">Delete</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="price : ${prices}">
                        <td th:text="${price.id}"></td>
                        <td th:text="${price.price}"></td>
                        <td th:text="${price.store.name}"></td>
                        <td><a th:href="@{/products/buy/{id}(id=${price.id})}">Buy</a></td>
                        <td sec:authorize="hasRole('ROLE_MODERATOR')"><a
                                th:href="@{/products/buy/{id}(id=${price.id})}">Edit</a>
                        </td>
                        <td sec:authorize="hasRole('ROLE_ADMIN')"><a th:href="@{/products/delete/{id}(id=${price.id})}">Delete</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div sec:authorize="hasRole('ROLE_MODERATOR')" class="col mb-2">
            <form th:action="@{/products/edit/{id}(id=${product.id})}" method="POST" th:object="${productForm}">
                <h2 class="text-center">Add new price to Product</h2>
                <div class="form-group">
                    <input type="text" th:field="*{priceDouble}" class="form-control" placeholder="Price"/>
                </div>
                <div class="form-group"> Stores
                    <select class="form-control" th:field="*{storeId}">
                        <option th:each="store : ${stores}"
                                th:value="${store.id}"
                                th:text="${store.name}">
                        </option>
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block" value="Create">Create</button>
                </div>
            </form>
            <form th:action="@{/products/upload/{id}(id=${product.id})}" method="POST" th:object="${productForm}"
                  enctype="multipart/form-data">
                <h2 class="text-center">Upload Image to Product</h2>
                <div class="form-group">
                    <input type="file" name="file" class="form-control-file">
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block" value="Upload">Upload Image</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div th:replace="fragments/footer :: footer"></div>
<!-- Modal image -->
<div class="modal fade" id="productModal" tabindex="-1" role="dialog" aria-labelledby="productModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="productModalLabel">Product title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">Ã—</span>
                </button>
            </div>
            <div class="modal-body">
                <img class="img-fluid" src="https://dummyimage.com/1200x1200/55595c/fff"/>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>